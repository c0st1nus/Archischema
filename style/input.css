@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    :root {
        /* Light theme colors */
        --bg-primary: #ffffff;
        --bg-secondary: #f9fafb;
        --bg-tertiary: #f3f4f6;
        --bg-surface: #ffffff;
        --bg-canvas: #f8fafc;

        --text-primary: #111827;
        --text-secondary: #374151;
        --text-tertiary: #6b7280;
        --text-muted: #9ca3af;

        --border-primary: #e5e7eb;
        --border-secondary: #d1d5db;
        --border-focus: #3b82f6;

        --accent-primary: #2563eb;
        --accent-secondary: #1d4ed8;
        --accent-light: #dbeafe;

        --success-bg: #f0fdf4;
        --success-border: #bbf7d0;
        --success-text: #166534;

        --error-bg: #fef2f2;
        --error-border: #fecaca;
        --error-text: #dc2626;

        --warning-bg: #fffbeb;
        --warning-border: #fde68a;
        --warning-text: #92400e;

        --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
        --shadow-md:
            0 4px 6px -1px rgba(0, 0, 0, 0.1),
            0 2px 4px -1px rgba(0, 0, 0, 0.06);
        --shadow-lg:
            0 10px 15px -3px rgba(0, 0, 0, 0.1),
            0 4px 6px -2px rgba(0, 0, 0, 0.05);
        --shadow-xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);

        --backdrop-blur: rgba(255, 255, 255, 0.8);

        --grid-line: rgba(0, 0, 0, 0.05);
    }

    .dark {
        /* Dark theme colors */
        --bg-primary: #0f172a;
        --bg-secondary: #1e293b;
        --bg-tertiary: #334155;
        --bg-surface: #1e293b;
        --bg-canvas: #0c1222;

        --text-primary: #f1f5f9;
        --text-secondary: #cbd5e1;
        --text-tertiary: #94a3b8;
        --text-muted: #64748b;

        --border-primary: #334155;
        --border-secondary: #475569;
        --border-focus: #3b82f6;

        --accent-primary: #3b82f6;
        --accent-secondary: #2563eb;
        --accent-light: #1e3a5f;

        --success-bg: #052e16;
        --success-border: #166534;
        --success-text: #86efac;

        --error-bg: #450a0a;
        --error-border: #991b1b;
        --error-text: #fca5a5;

        --warning-bg: #451a03;
        --warning-border: #92400e;
        --warning-text: #fde68a;

        --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.2);
        --shadow-md:
            0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.2);
        --shadow-lg:
            0 10px 15px -3px rgba(0, 0, 0, 0.3),
            0 4px 6px -2px rgba(0, 0, 0, 0.15);
        --shadow-xl: 0 25px 50px -12px rgba(0, 0, 0, 0.5);

        --backdrop-blur: rgba(15, 23, 42, 0.8);

        --grid-line: rgba(255, 255, 255, 0.05);
    }

    body {
        font-family:
            "Inter",
            -apple-system,
            BlinkMacSystemFont,
            "Segoe UI",
            "Roboto",
            "Oxygen",
            "Ubuntu",
            "Cantarell",
            "Fira Sans",
            "Droid Sans",
            "Helvetica Neue",
            sans-serif;
        margin: 0;
        padding: 0;
        background-color: var(--bg-primary);
        color: var(--text-primary);
        transition:
            background-color 0.2s ease,
            color 0.2s ease;
    }

    * {
        box-sizing: border-box;
    }
}

@layer utilities {
    /* Line clamp utilities for text truncation */
    .line-clamp-1 {
        display: -webkit-box;
        -webkit-line-clamp: 1;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .line-clamp-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .line-clamp-3 {
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    /* Canvas grid pattern with theme support */
    .bg-grid-pattern {
        background-image:
            linear-gradient(var(--grid-line) 1px, transparent 1px),
            linear-gradient(90deg, var(--grid-line) 1px, transparent 1px);
        background-size: 20px 20px;
    }

    /* Theme-aware backgrounds */
    .bg-theme-primary {
        background-color: var(--bg-primary);
    }

    .bg-theme-secondary {
        background-color: var(--bg-secondary);
    }

    .bg-theme-tertiary {
        background-color: var(--bg-tertiary);
    }

    .bg-theme-surface {
        background-color: var(--bg-surface);
    }

    .bg-theme-canvas {
        background-color: var(--bg-canvas);
    }

    /* Theme-aware text colors */
    .text-theme-primary {
        color: var(--text-primary);
    }

    .text-theme-secondary {
        color: var(--text-secondary);
    }

    .text-theme-tertiary {
        color: var(--text-tertiary);
    }

    .text-theme-muted {
        color: var(--text-muted);
    }

    /* Theme-aware borders */
    .border-theme {
        border-color: var(--border-primary);
    }

    .border-theme-primary {
        border-color: var(--border-primary);
    }

    .border-theme-secondary {
        border-color: var(--border-secondary);
    }

    /* Theme-aware shadows */
    .shadow-theme-sm {
        box-shadow: var(--shadow-sm);
    }

    .shadow-theme-md {
        box-shadow: var(--shadow-md);
    }

    .shadow-theme-lg {
        box-shadow: var(--shadow-lg);
    }

    .shadow-theme-xl {
        box-shadow: var(--shadow-xl);
    }

    /* Backdrop blur */
    .backdrop-theme {
        background-color: var(--backdrop-blur);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
    }

    /* Success states */
    .bg-theme-success {
        background-color: var(--success-bg);
    }

    .border-theme-success {
        border-color: var(--success-border);
    }

    .text-theme-success {
        color: var(--success-text);
    }

    /* Error states */
    .bg-theme-error {
        background-color: var(--error-bg);
    }

    .border-theme-error {
        border-color: var(--error-border);
    }

    .text-theme-error {
        color: var(--error-text);
    }

    /* Warning states */
    .bg-theme-warning {
        background-color: var(--warning-bg);
    }

    .border-theme-warning {
        border-color: var(--warning-border);
    }

    .text-theme-warning {
        color: var(--warning-text);
    }

    /* Accent colors */
    .bg-theme-accent {
        background-color: var(--accent-primary);
    }

    .bg-theme-accent-light {
        background-color: var(--accent-light);
    }

    .text-theme-accent {
        color: var(--accent-primary);
    }

    .border-theme-accent {
        border-color: var(--accent-primary);
    }

    /* Tailwind-style accent classes for compatibility */
    .bg-accent-primary {
        background-color: var(--accent-primary);
    }

    .bg-accent-primary-hover {
        background-color: var(--accent-secondary);
    }

    .hover\:bg-accent-primary-hover:hover {
        background-color: var(--accent-secondary);
    }

    .text-accent-primary {
        color: var(--accent-primary);
    }

    .hover\:text-accent-primary:hover {
        color: var(--accent-primary);
    }

    .border-accent-primary {
        border-color: var(--accent-primary);
    }

    .shadow-accent-primary\/25 {
        --tw-shadow-color: rgba(37, 99, 235, 0.25);
    }

    .hover\:shadow-accent-primary\/25:hover {
        --tw-shadow-color: rgba(37, 99, 235, 0.25);
        box-shadow:
            0 10px 15px -3px var(--tw-shadow-color),
            0 4px 6px -2px var(--tw-shadow-color);
    }

    .bg-accent-primary\/5 {
        background-color: rgba(37, 99, 235, 0.05);
    }

    .bg-accent-primary\/10 {
        background-color: rgba(37, 99, 235, 0.1);
    }

    .bg-accent-primary\/20 {
        background-color: rgba(37, 99, 235, 0.2);
    }

    .dark .bg-accent-primary\/5 {
        background-color: rgba(59, 130, 246, 0.05);
    }

    .dark .bg-accent-primary\/10 {
        background-color: rgba(59, 130, 246, 0.1);
    }

    .dark .bg-accent-primary\/20 {
        background-color: rgba(59, 130, 246, 0.2);
    }

    .ring-accent-primary {
        --tw-ring-color: var(--accent-primary);
    }

    .focus\:ring-accent-primary:focus {
        --tw-ring-color: var(--accent-primary);
    }

    /* Selection prevention */
    .select-none {
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
    }

    /* Transitions for theme changes */
    .theme-transition {
        transition:
            background-color 0.2s ease,
            color 0.2s ease,
            border-color 0.2s ease,
            box-shadow 0.2s ease;
    }
}

@layer components {
    /* ========================================================================
       Button Components
       ======================================================================== */

    /* Base button styles */
    .btn-base {
        @apply px-4 py-2 text-sm font-medium rounded-lg transition-colors;
        @apply flex items-center justify-center;
        @apply disabled:opacity-50 disabled:cursor-not-allowed;
    }

    /* Primary button */
    .btn-primary {
        @apply btn-base btn-theme-primary;
    }

    /* Secondary button */
    .btn-secondary {
        @apply btn-base text-theme-secondary hover:bg-theme-tertiary;
    }

    /* Danger button */
    .btn-danger {
        @apply btn-base text-red-500 hover:text-red-600;
        @apply hover:bg-red-50 dark:hover:bg-red-900/20;
    }

    /* Icon button (square) */
    .btn-icon {
        @apply flex items-center justify-center w-9 h-9 rounded-lg;
        @apply text-theme-secondary hover:text-theme-primary;
        @apply hover:bg-theme-secondary transition-colors;
    }

    /* Small button variant */
    .btn-sm {
        @apply px-3 py-1.5 text-xs;
    }

    /* Large button variant */
    .btn-lg {
        @apply px-6 py-3 text-base;
    }

    /* ========================================================================
       Form Input Components
       ======================================================================== */

    /* Standard input field */
    .input-base {
        @apply w-full px-4 py-2.5 input-theme rounded-lg transition-all;
    }

    /* Small input variant */
    .input-sm {
        @apply px-3 py-2 text-sm;
    }

    /* Select dropdown */
    .select-base {
        @apply w-full px-3 py-2 input-theme rounded-md text-sm;
    }

    /* ========================================================================
       Card Components
       ======================================================================== */

    /* Standard card */
    .card {
        @apply bg-theme-surface border border-theme-primary rounded-lg;
        @apply shadow-theme-md theme-transition;
    }

    /* Card with padding */
    .card-padded {
        @apply card p-4;
    }

    /* Info card (with secondary background) */
    .card-info {
        @apply p-4 bg-theme-secondary rounded-lg theme-transition;
    }

    /* Card header */
    .card-header {
        @apply px-4 py-3 border-b border-theme-primary;
        @apply bg-theme-tertiary theme-transition;
    }

    /* ========================================================================
       Typography Components
       ======================================================================== */

    /* Modal/section title */
    .title-lg {
        @apply text-lg font-semibold text-theme-primary;
    }

    /* Section subtitle */
    .subtitle {
        @apply text-sm text-theme-muted;
    }

    /* Label for form fields */
    .label {
        @apply block text-sm font-medium text-theme-secondary mb-2;
    }

    /* Small label */
    .label-sm {
        @apply block text-xs font-medium text-theme-tertiary mb-1;
    }

    /* ========================================================================
       Icon Components
       ======================================================================== */

    /* Icon next to text (default spacing) */
    .icon-text {
        @apply w-4 h-4 mr-1.5;
    }

    /* Icon in button (with margin) */
    .icon-btn {
        @apply w-4 h-4 mr-1.5;
    }

    /* Icon standalone (no margin) */
    .icon-standalone {
        @apply w-5 h-5;
    }

    /* Large icon */
    .icon-lg {
        @apply w-6 h-6;
    }

    /* ========================================================================
       Status & Feedback Components
       ======================================================================== */

    /* Error message */
    .error-message {
        @apply flex items-center text-sm text-theme-error;
    }

    /* Success message */
    .success-message {
        @apply flex items-center text-sm text-theme-success;
    }

    /* Warning message */
    .warning-message {
        @apply flex items-center text-sm text-theme-warning;
    }

    /* ========================================================================
       Keyboard Shortcut Components
       ======================================================================== */

    /* Keyboard key display */
    .kbd {
        @apply px-2 py-1 bg-theme-tertiary rounded;
        @apply border border-theme-secondary;
        @apply font-mono text-theme-secondary text-xs;
    }

    /* Keyboard shortcut hint container */
    .kbd-hint {
        @apply flex items-center justify-center space-x-4;
        @apply text-xs text-theme-muted;
    }

    /* ========================================================================
       Navigation Components
       ======================================================================== */

    /* Back button link */
    .nav-back {
        @apply flex items-center text-sm text-theme-accent;
        @apply hover:opacity-80 font-medium transition-opacity;
    }

    /* Breadcrumb text */
    .breadcrumb {
        @apply text-xs text-theme-muted;
    }

    /* ========================================================================
       List & Item Components
       ======================================================================== */

    /* Hoverable list item */
    .list-item-hover {
        @apply hover:bg-theme-secondary rounded transition-colors;
    }

    /* List item with border */
    .list-item-bordered {
        @apply border-b border-theme-primary last:border-b-0;
    }

    /* ========================================================================
       Divider Components
       ======================================================================== */

    /* Top border divider */
    .divider-top {
        @apply border-t border-theme-primary;
    }

    /* Bottom border divider */
    .divider-bottom {
        @apply border-b border-theme-primary;
    }

    /* Full divider with padding */
    .divider {
        @apply border-t border-theme-primary pt-4 mt-4;
    }

    /* ========================================================================
       Loading & Animation Components
       ======================================================================== */

    /* Spinner animation */
    .spinner {
        @apply animate-spin;
    }

    /* Fade in animation */
    .fade-in {
        animation: fadeIn 0.2s ease-in-out;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
        }
        to {
            opacity: 1;
        }
    }

    /* Slide in from right */
    .slide-in-right {
        animation: slideInRight 0.3s ease-out;
    }

    @keyframes slideInRight {
        from {
            transform: translateX(1rem);
            opacity: 0;
        }
        to {
            transform: translateX(0);
            opacity: 1;
        }
    }

    /* ========================================================================
       Scrollbar Styles
       ======================================================================== */

    ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
    }

    ::-webkit-scrollbar-track {
        background: var(--bg-tertiary);
    }

    ::-webkit-scrollbar-thumb {
        background: var(--text-muted);
        border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
        background: var(--text-tertiary);
    }

    /* ========================================================================
       Icon Filter Styles
       ======================================================================== */

    /* SVG icon styles */
    img[src^="/icons/"] {
        display: inline-block;
        vertical-align: middle;
        flex-shrink: 0;
    }

    /* Icon color inheritance */
    .text-white img[src^="/icons/"],
    .text-white svg {
        filter: brightness(0) saturate(100%) invert(1);
    }

    /* Dark mode - make all icons light/white by default */
    .dark img[src^="/icons/"] {
        filter: brightness(0) saturate(100%) invert(85%) sepia(0%) saturate(0%)
            hue-rotate(0deg) brightness(100%) contrast(100%);
    }

    /* Dark mode - white icons for specific contexts */
    .dark .text-white img[src^="/icons/"],
    .dark .text-white svg {
        filter: brightness(0) saturate(100%) invert(1);
    }

    .dark .text-gray-400 img[src^="/icons/"],
    .dark .text-gray-500 img[src^="/icons/"],
    .dark .text-gray-600 img[src^="/icons/"] {
        filter: brightness(0) saturate(100%) invert(70%) sepia(0%) saturate(0%)
            hue-rotate(207deg) brightness(92%) contrast(86%);
    }

    /* Dark mode - theme-aware icon classes */
    .dark .text-theme-primary img[src^="/icons/"],
    .dark .text-theme-secondary img[src^="/icons/"],
    .dark .text-theme-tertiary img[src^="/icons/"],
    .dark .text-theme-muted img[src^="/icons/"] {
        filter: brightness(0) saturate(100%) invert(85%) sepia(0%) saturate(0%)
            hue-rotate(0deg) brightness(100%) contrast(100%);
    }

    /* Dark mode - accent colored icons */
    .dark .text-theme-accent img[src^="/icons/"] {
        filter: brightness(0) saturate(100%) invert(45%) sepia(98%)
            saturate(2000%) hue-rotate(200deg) brightness(100%) contrast(95%);
    }

    .text-gray-400 img[src^="/icons/"] {
        filter: brightness(0) saturate(100%) invert(72%) sepia(0%) saturate(0%)
            hue-rotate(207deg) brightness(92%) contrast(86%);
    }

    .text-gray-500 img[src^="/icons/"] {
        filter: brightness(0) saturate(100%) invert(46%) sepia(0%) saturate(0%)
            hue-rotate(207deg) brightness(98%) contrast(89%);
    }

    .text-gray-600 img[src^="/icons/"] {
        filter: brightness(0) saturate(100%) invert(38%) sepia(0%) saturate(0%)
            hue-rotate(207deg) brightness(95%) contrast(92%);
    }

    .text-gray-300 img[src^="/icons/"] {
        filter: brightness(0) saturate(100%) invert(87%) sepia(0%) saturate(0%)
            hue-rotate(207deg) brightness(88%) contrast(86%);
    }

    .text-blue-600 img[src^="/icons/"] {
        filter: brightness(0) saturate(100%) invert(28%) sepia(93%)
            saturate(2433%) hue-rotate(212deg) brightness(95%) contrast(93%);
    }

    .text-yellow-800 img[src^="/icons/"] {
        filter: brightness(0) saturate(100%) invert(40%) sepia(74%)
            saturate(1055%) hue-rotate(1deg) brightness(92%) contrast(93%);
    }

    /* Hover effects for icons */
    .group:hover .group-hover\:text-blue-600 img[src^="/icons/"] {
        filter: brightness(0) saturate(100%) invert(28%) sepia(93%)
            saturate(2433%) hue-rotate(212deg) brightness(95%) contrast(93%);
        transition: filter 0.2s ease-in-out;
    }

    .hover\:text-blue-600:hover img[src^="/icons/"] {
        filter: brightness(0) saturate(100%) invert(28%) sepia(93%)
            saturate(2433%) hue-rotate(212deg) brightness(95%) contrast(93%);
        transition: filter 0.2s ease-in-out;
    }

    .hover\:text-blue-700:hover img[src^="/icons/"] {
        filter: brightness(0) saturate(100%) invert(23%) sepia(93%)
            saturate(2433%) hue-rotate(212deg) brightness(90%) contrast(98%);
        transition: filter 0.2s ease-in-out;
    }

    /* Icon buttons */
    button img[src^="/icons/"] {
        pointer-events: none;
    }

    /* Icon sizes */
    .w-3 img[src^="/icons/"],
    .h-3 img[src^="/icons/"] {
        width: 0.75rem;
        height: 0.75rem;
    }

    .w-4 img[src^="/icons/"],
    .h-4 img[src^="/icons/"] {
        width: 1rem;
        height: 1rem;
    }

    .w-5 img[src^="/icons/"],
    .h-5 img[src^="/icons/"] {
        width: 1.25rem;
        height: 1.25rem;
    }

    .w-6 img[src^="/icons/"],
    .h-6 img[src^="/icons/"] {
        width: 1.5rem;
        height: 1.5rem;
    }

    /* Theme-aware input styles */
    .input-theme {
        background-color: var(--bg-surface);
        border: 1px solid var(--border-primary);
        color: var(--text-primary);
        transition:
            border-color 0.2s ease,
            box-shadow 0.2s ease;
    }

    .input-theme:focus {
        border-color: var(--accent-primary);
        box-shadow: 0 0 0 3px var(--accent-light);
        outline: none;
    }

    .input-theme::placeholder {
        color: var(--text-muted);
    }

    /* Theme-aware button styles */
    .btn-theme-primary {
        background: linear-gradient(
            to right,
            var(--accent-primary),
            var(--accent-secondary)
        );
        color: white;
        transition:
            opacity 0.2s ease,
            transform 0.2s ease;
    }

    .btn-theme-primary:hover {
        opacity: 0.9;
    }

    .btn-theme-primary:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }

    .btn-theme-secondary {
        background-color: var(--bg-tertiary);
        color: var(--text-secondary);
        transition: background-color 0.2s ease;
    }

    .btn-theme-secondary:hover {
        background-color: var(--border-primary);
    }

    /* Theme-aware card styles (deprecated - use .card instead) */
    .card-theme {
        background-color: var(--bg-surface);
        border: 1px solid var(--border-primary);
        box-shadow: var(--shadow-md);
    }

    /* Modal backdrop */
    .modal-backdrop-theme {
        background-color: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
    }

    .dark .modal-backdrop-theme {
        background-color: rgba(0, 0, 0, 0.7);
    }

    /* Tab styles */
    .tab-theme-active {
        background-color: var(--bg-surface);
        color: var(--accent-primary);
        box-shadow: var(--shadow-sm);
    }

    .tab-theme-inactive {
        background-color: transparent;
        color: var(--text-tertiary);
    }

    .tab-theme-inactive:hover {
        color: var(--text-secondary);
    }
}
